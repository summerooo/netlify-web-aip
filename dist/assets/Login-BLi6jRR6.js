import{y as V,r as b,l as h,z as k,A as B,B as s,R as o,J as t,W as R,al as l,O as d,aB as z,u as m}from"./vendor-D5A_PLSQ.js";import{m as A,l as C,E as _}from"./ui-DUo8Dfqk.js";import{u as I}from"./index-1yu-MD6X.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./supabase-C1h6x9Gt.js";const E={class:"login-container"},F={class:"login-card"},L={class:"login-footer"},N=V({__name:"Login",setup(S){const a=z(),p=I(),n=b(),r=h({email:"",password:""}),w={email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},c=async()=>{n.value&&await n.value.validate(async f=>{if(f)try{await p.signIn(r.email,r.password),_.success("登录成功");const e=a.currentRoute.value.query.redirect;e&&e.startsWith("/")?a.push(e):a.push("/dashboard")}catch(e){_.error(e.message||"登录失败")}})};return(f,e)=>{const g=l("el-input"),i=l("el-form-item"),v=l("el-button"),y=l("el-form"),x=l("router-link");return B(),k("div",E,[s("div",F,[e[5]||(e[5]=s("div",{class:"login-header"},[s("h1",null,"登录 AIP"),s("p",null,"AI项目管理平台")],-1)),o(y,{ref_key:"loginFormRef",ref:n,model:r,rules:w,onSubmit:R(c,["prevent"])},{default:t(()=>[o(i,{prop:"email"},{default:t(()=>[o(g,{modelValue:r.email,"onUpdate:modelValue":e[0]||(e[0]=u=>r.email=u),type:"email",placeholder:"邮箱地址",size:"large","prefix-icon":m(A)},null,8,["modelValue","prefix-icon"])]),_:1}),o(i,{prop:"password"},{default:t(()=>[o(g,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=u=>r.password=u),type:"password",placeholder:"密码",size:"large","prefix-icon":m(C),"show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),o(i,null,{default:t(()=>[o(v,{type:"primary",size:"large",loading:m(p).loading,onClick:c,style:{width:"100%"}},{default:t(()=>[...e[2]||(e[2]=[d(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),s("div",L,[s("p",null,[e[4]||(e[4]=d("还没有账号？ ",-1)),o(x,{to:"/register",class:"link"},{default:t(()=>[...e[3]||(e[3]=[d("立即注册",-1)])]),_:1})])])])])}}}),P=q(N,[["__scopeId","data-v-34d0c273"]]);export{P as default};
