import{y as Ce,r as C,l as Ue,c as ue,h as je,z as j,A as y,B as l,R as t,J as a,al as g,I as B,L as q,P as u,Q as G,a6 as K,O as b,u as w,W as Se,E as ce,aB as Ee}from"./vendor-D5A_PLSQ.js";import{E as O,p as Me,b as $e,z as _e,j as Ie,r as pe,A as qe,B as ze,t as Fe,C as Re,k as Ye,x as Ae,D as Le,n as Pe,y as Be,f as Oe}from"./ui-DUo8Dfqk.js";import{s as $,u as Ne}from"./index-1yu-MD6X.js";import{a as He}from"./projects-C6oOc8Q2.js";import{_ as We}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./supabase-C1h6x9Gt.js";const k=[];for(let n=0;n<256;++n)k.push((n+256).toString(16).slice(1));function Qe(n,r=0){return(k[n[r+0]]+k[n[r+1]]+k[n[r+2]]+k[n[r+3]]+"-"+k[n[r+4]]+k[n[r+5]]+"-"+k[n[r+6]]+k[n[r+7]]+"-"+k[n[r+8]]+k[n[r+9]]+"-"+k[n[r+10]]+k[n[r+11]]+k[n[r+12]]+k[n[r+13]]+k[n[r+14]]+k[n[r+15]]).toLowerCase()}let X;const Je=new Uint8Array(16);function Ge(){if(!X){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");X=crypto.getRandomValues.bind(crypto)}return X(Je)}const Ke=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ve={randomUUID:Ke};function Xe(n,r,p){var v;n=n||{};const c=n.random??((v=n.rng)==null?void 0:v.call(n))??Ge();if(c.length<16)throw new Error("Random bytes length must be >= 16");return c[6]=c[6]&15|64,c[8]=c[8]&63|128,Qe(c)}function Ze(n,r,p){return ve.randomUUID&&!n?ve.randomUUID():Xe(n)}async function et(){try{const{data:{user:n},error:r}=await $.auth.getUser();if(r)throw r;if(!n)throw new Error("用户未登录");const{data:p,error:c}=await $.from("project_members").select("project_id").eq("user_id",n.id);if(c)throw c;const v=(p==null?void 0:p.map(V=>V.project_id))||[];let h=$.from("tasks").select(`
        *,
        projects (name),
        user_profiles:assigned_to (full_name, avatar_url)
      `);const U=[];U.push(`created_by.eq.${n.id}`),U.push(`assigned_to.eq.${n.id}`),v.length>0&&U.push(`project_id.in.(${v.join(",")})`),U.length>0&&(h=h.or(U.join(",")));const{data:E,error:S}=await h.order("created_at",{ascending:!1});if(S)throw S;return(E||[]).map(V=>{var z,A,M;return{...V,project_name:((z=V.projects)==null?void 0:z.name)||"无项目",assignee_name:((A=V.user_profiles)==null?void 0:A.full_name)||"",assignee_avatar:((M=V.user_profiles)==null?void 0:M.avatar_url)||""}})}catch(n){throw console.error("获取用户任务失败:",n),n}}async function tt(n){try{const{data:{user:r},error:p}=await $.auth.getUser();if(p)throw p;if(!r)throw new Error("用户未登录");const c=Ze(),{data:v,error:h}=await $.from("tasks").insert({id:c,title:n.title,description:n.description,project_id:n.project_id||null,priority:n.priority,status:n.status,due_date:n.due_date||null,assigned_to:n.assigned_to||r.id,created_by:r.id,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select();if(h)throw h;return v==null?void 0:v[0]}catch(r){throw console.error("创建任务失败:",r),r}}async function fe(n,r){try{const{data:{user:p},error:c}=await $.auth.getUser();if(c)throw c;if(!p)throw new Error("用户未登录");const{data:v,error:h}=await $.from("tasks").update({...r,updated_at:new Date().toISOString()}).eq("id",n).select();if(h)throw h;return v==null?void 0:v[0]}catch(p){throw console.error("更新任务失败:",p),p}}async function lt(n){try{const{data:{user:r},error:p}=await $.auth.getUser();if(p)throw p;if(!r)throw new Error("用户未登录");const{error:c}=await $.from("tasks").delete().eq("id",n);if(c)throw c;return!0}catch(r){throw console.error("删除任务失败:",r),r}}async function at(n){try{return await fe(n,{status:"已完成"})}catch(r){throw console.error("标记任务完成失败:",r),r}}const st={class:"tasks-page"},ot={class:"page-header"},nt={class:"header-actions"},rt={class:"page-content"},dt={class:"stats-section"},it={class:"stat-content"},ut={class:"stat-icon total"},ct={class:"stat-info"},_t={class:"stat-number"},pt={class:"stat-content"},vt={class:"stat-icon pending"},ft={class:"stat-info"},mt={class:"stat-number"},yt={class:"stat-content"},gt={class:"stat-icon inProgress"},wt={class:"stat-info"},ht={class:"stat-number"},bt={class:"stat-content"},kt={class:"stat-icon completed"},Vt={class:"stat-info"},Dt={class:"stat-number"},Tt={class:"stat-content"},xt={class:"stat-icon overdue"},Ct={class:"stat-info"},Ut={class:"stat-number"},jt={class:"stat-content"},St={class:"stat-icon dueToday"},Et={class:"stat-info"},Mt={class:"stat-number"},$t={class:"filter-section"},It={class:"filter-left"},qt={class:"filter-right"},zt={class:"tasks-section"},Ft={key:0,class:"loading-state"},Rt={key:1,class:"empty-state"},Yt={key:2,class:"tasks-list"},At={class:"task-header"},Lt={class:"task-title"},Pt={class:"task-tags"},Bt={class:"task-actions"},Ot={class:"task-description"},Nt={class:"task-meta"},Ht={class:"meta-item"},Wt={key:0,class:"meta-item"},Qt={class:"meta-item"},Jt={key:0,class:"task-assignee"},Gt={key:0,class:"task-detail"},Kt={class:"detail-header"},Xt={class:"detail-tags"},Zt={class:"detail-content"},el={class:"detail-section"},tl={class:"detail-section"},ll={class:"detail-info"},al={class:"info-item"},sl={class:"info-item"},ol={key:0,class:"info-item"},nl={key:1,class:"info-item"},rl=Ce({__name:"Tasks",setup(n){Ee(),Ne();const r=C(!0),p=C(!1),c=C(!1),v=C(!1),h=C(""),U=C(""),E=C(""),S=C(""),I=C(""),V=C([]),z=C([]),A=C(null),M=C(null),D=C(null),i=Ue({title:"",description:"",project_id:"",priority:"中",status:"待办",due_date:""}),me={title:[{required:!0,message:"请输入任务标题",trigger:"blur"},{min:1,max:100,message:"任务标题长度在 1 到 100 个字符",trigger:"blur"}],priority:[{required:!0,message:"请选择优先级",trigger:"change"}],status:[{required:!0,message:"请选择任务状态",trigger:"change"}]},L=ue(()=>{const o=V.value.length,e=V.value.filter(_=>_.status==="待办").length,d=V.value.filter(_=>_.status==="进行中").length,f=V.value.filter(_=>_.status==="已完成").length,T=V.value.filter(_=>_.due_date&&F(_.due_date)&&_.status!=="已完成").length,x=V.value.filter(_=>_.due_date&&W(_.due_date)&&_.status!=="已完成").length;return{total:o,pending:e,inProgress:d,completed:f,overdue:T,dueToday:x}}),Z=ue(()=>{let o=V.value;if(h.value){const e=h.value.toLowerCase();o=o.filter(d=>d.title.toLowerCase().includes(e)||d.description&&d.description.toLowerCase().includes(e))}if(U.value&&(o=o.filter(e=>e.status===U.value)),E.value&&(o=o.filter(e=>e.priority===E.value)),S.value&&(o=o.filter(e=>e.project_id===S.value)),I.value){const e=new Date,d=new Date(e.getFullYear(),e.getMonth(),e.getDate()),f=new Date(d.getTime()+24*60*60*1e3),T=new Date(d.getTime()+7*24*60*60*1e3);o=o.filter(x=>{if(!x.due_date)return!1;const _=new Date(x.due_date);switch(I.value){case"today":return _>=d&&_<f;case"tomorrow":const N=new Date(f.getTime()+24*60*60*1e3);return _>=f&&_<N;case"thisWeek":return _>=d&&_<=T;case"overdue":return _<e&&x.status!=="已完成";default:return!0}})}return o.sort((e,d)=>{if(!e.due_date&&!d.due_date)return 0;if(!e.due_date)return 1;if(!d.due_date)return-1;const f=F(e.due_date),T=F(d.due_date);return f&&!T?-1:!f&&T?1:new Date(e.due_date).getTime()-new Date(d.due_date).getTime()})}),ee=o=>({待办:"info",进行中:"warning",已完成:"success",已取消:"danger"})[o]||"info",te=o=>({高:"danger",中:"warning",低:"info"})[o]||"info",le=o=>o?new Date(o).toLocaleDateString("zh-CN"):"",ae=o=>o?new Date(o).toLocaleString("zh-CN"):"",F=o=>o?new Date(o)<new Date:!1,W=o=>{if(!o)return!1;const e=new Date,d=new Date(o);return e.toDateString()===d.toDateString()},se=o=>{if(!o)return!1;const e=new Date;e.setDate(e.getDate()+1);const d=new Date(o);return e.toDateString()===d.toDateString()},oe=o=>{if(!o)return"";if(F(o))return"已过期";if(W(o))return"今天到期";if(se(o))return"明天到期";const e=new Date,d=new Date(o),f=Math.ceil((d.getTime()-e.getTime())/(1e3*60*60*24));return f<=7?`${f}天后到期`:""},ne=o=>{D.value=o,v.value=!0},re=o=>{M.value=o,i.title=o.title,i.description=o.description||"",i.project_id=o.project_id||"",i.priority=o.priority,i.status=o.status,i.due_date=o.due_date||"",v.value=!1,c.value=!0},ye=()=>{M.value=null,c.value=!1,de()},de=()=>{i.title="",i.description="",i.project_id="",i.priority="中",i.status="待办",i.due_date=""},ge=async()=>{if(A.value){try{await A.value.validate()}catch{return}p.value=!0;try{M.value?(await fe(M.value.id,{title:i.title,description:i.description,project_id:i.project_id||void 0,priority:i.priority,status:i.status,due_date:i.due_date||void 0}),O.success("任务更新成功")):(await tt({title:i.title,description:i.description,project_id:i.project_id||void 0,priority:i.priority,status:i.status,due_date:i.due_date||void 0}),O.success("任务创建成功")),c.value=!1,M.value=null,de(),await J()}catch(o){O.error("保存任务失败: "+o.message)}finally{p.value=!1}}},we=async o=>{try{await at(o.id),O.success("任务已标记为完成"),await J()}catch(e){O.error("操作失败: "+e.message)}},J=async()=>{r.value=!0;try{const o=await et();V.value=o||[]}catch(o){console.error("加载任务列表失败:",o),O.error("加载任务列表失败: "+o.message),V.value=[]}finally{r.value=!1}},he=async()=>{try{const o=await He();z.value=o||[]}catch(o){console.error("加载项目列表失败:",o),z.value=[]}};return je(()=>{J(),he()}),(o,e)=>{const d=g("el-icon"),f=g("el-button"),T=g("el-card"),x=g("el-col"),_=g("el-row"),N=g("el-input"),m=g("el-option"),R=g("el-select"),be=g("el-skeleton"),H=g("el-tag"),Q=g("el-dropdown-item"),ke=g("el-dropdown-menu"),Ve=g("el-dropdown"),De=g("el-avatar"),P=g("el-form-item"),Te=g("el-date-picker"),xe=g("el-form"),ie=g("el-dialog");return y(),j("div",st,[l("div",ot,[e[19]||(e[19]=l("div",{class:"header-content"},[l("h1",null,"任务管理"),l("p",null,"管理您的所有任务")],-1)),l("div",nt,[t(f,{type:"primary",onClick:e[0]||(e[0]=s=>c.value=!0)},{default:a(()=>[t(d,null,{default:a(()=>[t(w(Me))]),_:1}),e[18]||(e[18]=b(" 创建任务 ",-1))]),_:1})])]),l("div",rt,[l("div",dt,[t(_,{gutter:20},{default:a(()=>[t(x,{span:6},{default:a(()=>[t(T,{class:"stat-card"},{default:a(()=>[l("div",it,[l("div",ut,[t(d,null,{default:a(()=>[t(w($e))]),_:1})]),l("div",ct,[l("div",_t,u(L.value.total),1),e[20]||(e[20]=l("div",{class:"stat-label"},"总任务数",-1))])])]),_:1})]),_:1}),t(x,{span:6},{default:a(()=>[t(T,{class:"stat-card"},{default:a(()=>[l("div",pt,[l("div",vt,[t(d,null,{default:a(()=>[t(w(_e))]),_:1})]),l("div",ft,[l("div",mt,u(L.value.pending),1),e[21]||(e[21]=l("div",{class:"stat-label"},"待办",-1))])])]),_:1})]),_:1}),t(x,{span:6},{default:a(()=>[t(T,{class:"stat-card"},{default:a(()=>[l("div",yt,[l("div",gt,[t(d,null,{default:a(()=>[t(w(Ie))]),_:1})]),l("div",wt,[l("div",ht,u(L.value.inProgress),1),e[22]||(e[22]=l("div",{class:"stat-label"},"进行中",-1))])])]),_:1})]),_:1}),t(x,{span:6},{default:a(()=>[t(T,{class:"stat-card"},{default:a(()=>[l("div",bt,[l("div",kt,[t(d,null,{default:a(()=>[t(w(pe))]),_:1})]),l("div",Vt,[l("div",Dt,u(L.value.completed),1),e[23]||(e[23]=l("div",{class:"stat-label"},"已完成",-1))])])]),_:1})]),_:1})]),_:1}),t(_,{gutter:20,style:{"margin-top":"20px"}},{default:a(()=>[t(x,{span:6},{default:a(()=>[t(T,{class:"stat-card"},{default:a(()=>[l("div",Tt,[l("div",xt,[t(d,null,{default:a(()=>[t(w(qe))]),_:1})]),l("div",Ct,[l("div",Ut,u(L.value.overdue),1),e[24]||(e[24]=l("div",{class:"stat-label"},"已过期",-1))])])]),_:1})]),_:1}),t(x,{span:6},{default:a(()=>[t(T,{class:"stat-card"},{default:a(()=>[l("div",jt,[l("div",St,[t(d,null,{default:a(()=>[t(w(ze))]),_:1})]),l("div",Et,[l("div",Mt,u(L.value.dueToday),1),e[25]||(e[25]=l("div",{class:"stat-label"},"今日到期",-1))])])]),_:1})]),_:1})]),_:1})]),l("div",$t,[l("div",It,[t(N,{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=s=>h.value=s),placeholder:"搜索任务标题或描述...",style:{width:"300px"},clearable:""},{prefix:a(()=>[t(d,null,{default:a(()=>[t(w(Fe))]),_:1})]),_:1},8,["modelValue"])]),l("div",qt,[t(R,{modelValue:U.value,"onUpdate:modelValue":e[2]||(e[2]=s=>U.value=s),placeholder:"任务状态",style:{width:"120px"},clearable:""},{default:a(()=>[t(m,{label:"待办",value:"待办"}),t(m,{label:"进行中",value:"进行中"}),t(m,{label:"已完成",value:"已完成"}),t(m,{label:"已取消",value:"已取消"})]),_:1},8,["modelValue"]),t(R,{modelValue:E.value,"onUpdate:modelValue":e[3]||(e[3]=s=>E.value=s),placeholder:"优先级",style:{width:"120px","margin-left":"12px"},clearable:""},{default:a(()=>[t(m,{label:"高",value:"高"}),t(m,{label:"中",value:"中"}),t(m,{label:"低",value:"低"})]),_:1},8,["modelValue"]),t(R,{modelValue:S.value,"onUpdate:modelValue":e[4]||(e[4]=s=>S.value=s),placeholder:"所属项目",style:{width:"150px","margin-left":"12px"},clearable:""},{default:a(()=>[(y(!0),j(G,null,K(z.value,s=>(y(),B(m,{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(R,{modelValue:I.value,"onUpdate:modelValue":e[5]||(e[5]=s=>I.value=s),placeholder:"截止时间",style:{width:"120px","margin-left":"12px"},clearable:""},{default:a(()=>[t(m,{label:"今天到期",value:"today"}),t(m,{label:"明天到期",value:"tomorrow"}),t(m,{label:"本周到期",value:"thisWeek"}),t(m,{label:"已过期",value:"overdue"})]),_:1},8,["modelValue"])])]),l("div",zt,[r.value?(y(),j("div",Ft,[t(be,{rows:5,animated:""})])):Z.value.length===0?(y(),j("div",Rt,[t(d,null,{default:a(()=>[t(w(Re))]),_:1}),l("h3",null,u(h.value||U.value||E.value||S.value||I.value?"未找到匹配的任务":"暂无任务"),1),l("p",null,u(h.value||U.value||E.value||S.value||I.value?"尝试调整筛选条件":"创建您的第一个任务开始工作"),1),!h.value&&!U.value&&!E.value&&!S.value&&!I.value?(y(),B(f,{key:0,type:"primary",onClick:e[6]||(e[6]=s=>c.value=!0)},{default:a(()=>[...e[26]||(e[26]=[b(" 创建任务 ",-1)])]),_:1})):q("",!0)])):(y(),j("div",Yt,[(y(!0),j(G,null,K(Z.value,s=>(y(),B(T,{key:s.id,class:"task-card",onClick:Y=>ne(s)},{default:a(()=>[l("div",At,[l("div",Lt,[l("h3",null,u(s.title),1),l("div",Pt,[t(H,{type:ee(s.status),size:"small"},{default:a(()=>[b(u(s.status),1)]),_:2},1032,["type"]),t(H,{type:te(s.priority),size:"small",style:{"margin-left":"8px"}},{default:a(()=>[b(u(s.priority)+"优先级 ",1)]),_:2},1032,["type"])])]),l("div",Bt,[t(Ve,{trigger:"click",onClick:e[7]||(e[7]=Se(()=>{},["stop"]))},{dropdown:a(()=>[t(ke,null,{default:a(()=>[t(Q,{onClick:Y=>ne(s)},{default:a(()=>[t(d,null,{default:a(()=>[t(w(Ae))]),_:1}),e[27]||(e[27]=b(" 查看详情 ",-1))]),_:1},8,["onClick"]),t(Q,{onClick:Y=>re(s)},{default:a(()=>[t(d,null,{default:a(()=>[t(w(Le))]),_:1}),e[28]||(e[28]=b(" 编辑任务 ",-1))]),_:1},8,["onClick"]),s.status!=="已完成"?(y(),B(Q,{key:0,onClick:Y=>we(s)},{default:a(()=>[t(d,null,{default:a(()=>[t(w(pe))]),_:1}),e[29]||(e[29]=b(" 标记完成 ",-1))]),_:1},8,["onClick"])):q("",!0),t(Q,{onClick:Y=>w(lt)(s),divided:""},{default:a(()=>[t(d,null,{default:a(()=>[t(w(Pe))]),_:1}),e[30]||(e[30]=b(" 删除任务 ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),default:a(()=>[t(f,{type:"text",size:"small"},{default:a(()=>[t(d,null,{default:a(()=>[t(w(Ye))]),_:1})]),_:1})]),_:2},1024)])]),l("div",Ot,[l("p",null,u(s.description||"暂无描述"),1)]),l("div",Nt,[l("div",Ht,[t(d,null,{default:a(()=>[t(w(Be))]),_:1}),l("span",null,"创建于 "+u(le(s.created_at)),1)]),s.due_date?(y(),j("div",Wt,[t(d,null,{default:a(()=>[t(w(_e))]),_:1}),l("span",{class:ce({overdue:F(s.due_date),"due-today":W(s.due_date),"due-tomorrow":se(s.due_date)})},[b(" 截止 "+u(le(s.due_date))+" ",1),oe(s.due_date)?(y(),B(H,{key:0,type:F(s.due_date)?"danger":W(s.due_date)?"warning":"info",size:"small",style:{"margin-left":"8px"}},{default:a(()=>[b(u(oe(s.due_date)),1)]),_:2},1032,["type"])):q("",!0)],2)])):q("",!0),l("div",Qt,[t(d,null,{default:a(()=>[t(w(Oe))]),_:1}),l("span",null,u(s.project_name||"无项目"),1)])]),s.assignee_name?(y(),j("div",Jt,[t(De,{size:24,src:s.assignee_avatar},{default:a(()=>{var Y;return[b(u((Y=s.assignee_name)==null?void 0:Y.charAt(0)),1)]}),_:2},1032,["src"]),l("span",null,u(s.assignee_name),1)])):q("",!0)]),_:2},1032,["onClick"]))),128))]))])]),t(ie,{modelValue:c.value,"onUpdate:modelValue":e[14]||(e[14]=s=>c.value=s),title:M.value?"编辑任务":"创建任务",width:"600px"},{footer:a(()=>[t(f,{onClick:ye},{default:a(()=>[...e[31]||(e[31]=[b("取消",-1)])]),_:1}),t(f,{type:"primary",loading:p.value,onClick:ge},{default:a(()=>[b(u(p.value?"保存中...":"保存"),1)]),_:1},8,["loading"])]),default:a(()=>[t(xe,{model:i,rules:me,ref_key:"taskFormRef",ref:A,"label-width":"80px"},{default:a(()=>[t(P,{label:"任务标题",prop:"title"},{default:a(()=>[t(N,{modelValue:i.title,"onUpdate:modelValue":e[8]||(e[8]=s=>i.title=s),placeholder:"请输入任务标题"},null,8,["modelValue"])]),_:1}),t(P,{label:"任务描述",prop:"description"},{default:a(()=>[t(N,{modelValue:i.description,"onUpdate:modelValue":e[9]||(e[9]=s=>i.description=s),type:"textarea",rows:3,placeholder:"请输入任务描述"},null,8,["modelValue"])]),_:1}),t(P,{label:"所属项目",prop:"project_id"},{default:a(()=>[t(R,{modelValue:i.project_id,"onUpdate:modelValue":e[10]||(e[10]=s=>i.project_id=s),placeholder:"请选择项目",style:{width:"100%"},clearable:""},{default:a(()=>[(y(!0),j(G,null,K(z.value,s=>(y(),B(m,{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(_,{gutter:20},{default:a(()=>[t(x,{span:12},{default:a(()=>[t(P,{label:"优先级",prop:"priority"},{default:a(()=>[t(R,{modelValue:i.priority,"onUpdate:modelValue":e[11]||(e[11]=s=>i.priority=s),placeholder:"请选择优先级",style:{width:"100%"}},{default:a(()=>[t(m,{label:"高",value:"高"}),t(m,{label:"中",value:"中"}),t(m,{label:"低",value:"低"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(x,{span:12},{default:a(()=>[t(P,{label:"任务状态",prop:"status"},{default:a(()=>[t(R,{modelValue:i.status,"onUpdate:modelValue":e[12]||(e[12]=s=>i.status=s),placeholder:"请选择状态",style:{width:"100%"}},{default:a(()=>[t(m,{label:"待办",value:"待办"}),t(m,{label:"进行中",value:"进行中"}),t(m,{label:"已完成",value:"已完成"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(P,{label:"截止日期",prop:"due_date"},{default:a(()=>[t(Te,{modelValue:i.due_date,"onUpdate:modelValue":e[13]||(e[13]=s=>i.due_date=s),type:"datetime",placeholder:"请选择截止日期",style:{width:"100%"},format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(ie,{modelValue:v.value,"onUpdate:modelValue":e[17]||(e[17]=s=>v.value=s),title:"任务详情",width:"700px"},{footer:a(()=>[t(f,{onClick:e[15]||(e[15]=s=>v.value=!1)},{default:a(()=>[...e[38]||(e[38]=[b("关闭",-1)])]),_:1}),t(f,{type:"primary",onClick:e[16]||(e[16]=s=>re(D.value))},{default:a(()=>[...e[39]||(e[39]=[b(" 编辑任务 ",-1)])]),_:1})]),default:a(()=>[D.value?(y(),j("div",Gt,[l("div",Kt,[l("h2",null,u(D.value.title),1),l("div",Xt,[t(H,{type:ee(D.value.status)},{default:a(()=>[b(u(D.value.status),1)]),_:1},8,["type"]),t(H,{type:te(D.value.priority),style:{"margin-left":"8px"}},{default:a(()=>[b(u(D.value.priority)+"优先级 ",1)]),_:1},8,["type"])])]),l("div",Zt,[l("div",el,[e[32]||(e[32]=l("h4",null,"任务描述",-1)),l("p",null,u(D.value.description||"暂无描述"),1)]),l("div",tl,[e[37]||(e[37]=l("h4",null,"任务信息",-1)),l("div",ll,[l("div",al,[e[33]||(e[33]=l("span",{class:"info-label"},"所属项目：",-1)),l("span",null,u(D.value.project_name||"无项目"),1)]),l("div",sl,[e[34]||(e[34]=l("span",{class:"info-label"},"创建时间：",-1)),l("span",null,u(ae(D.value.created_at)),1)]),D.value.due_date?(y(),j("div",ol,[e[35]||(e[35]=l("span",{class:"info-label"},"截止时间：",-1)),l("span",{class:ce({overdue:F(D.value.due_date)})},u(ae(D.value.due_date)),3)])):q("",!0),D.value.assignee_name?(y(),j("div",nl,[e[36]||(e[36]=l("span",{class:"info-label"},"负责人：",-1)),l("span",null,u(D.value.assignee_name),1)])):q("",!0)])])])])):q("",!0)]),_:1},8,["modelValue"])])}}}),vl=We(rl,[["__scopeId","data-v-818952bd"]]);export{vl as default};
